<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOCI 101 Exam Review</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Source+Sans+3:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <script>
        // Apply saved theme before paint to avoid flash
        if (localStorage.getItem('soci101_theme') === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
        }
    </script>

    <!-- Theme Toggle (persistent across screens) -->
    <button id="btn-theme-toggle" class="btn-theme-toggle" aria-label="Toggle dark mode"></button>

    <!-- Identity Modal -->
    <div id="identity-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <h2>Welcome</h2>
            <p class="modal-subtitle">Enter your info to get started.</p>
            <div class="modal-form">
                <label for="input-name">Name</label>
                <input type="text" id="input-name" placeholder="Your name" autocomplete="name">
                <label for="input-onyen">ONYEN</label>
                <input type="text" id="input-onyen" placeholder="Your ONYEN" autocomplete="username">
                <button id="btn-identity-save" class="btn btn-primary" disabled>Get Started</button>
            </div>
        </div>
    </div>

    <!-- Home Screen -->
    <div id="screen-home" class="screen">
        <div class="container home-container">
            <h1 class="home-title">SOCI 101<br>Exam Review</h1>
            <p id="home-greeting" class="home-greeting"></p>
            <div class="home-cards">
                <div id="card-chapters" class="home-card">
                    <h3>Chapters</h3>
                    <p class="home-card-subtitle">Study by topic</p>
                    <div id="home-chapters-progress" class="home-card-progress"></div>
                </div>
                <div class="home-card home-card-exams">
                    <h3>Practice Exams</h3>
                    <p class="home-card-subtitle">Test your knowledge</p>
                    <div id="home-exam-list" class="home-exam-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chapters List Screen -->
    <div id="screen-chapters" class="screen">
        <div class="container">
            <header class="top-bar">
                <button id="btn-back-home-from-chapters" class="btn btn-back">&larr; Home</button>
                <h2>Chapters</h2>
                <span></span>
            </header>
            <div id="chapters-list" class="chapters-list"></div>
        </div>
    </div>

    <!-- Chapter Detail Screen -->
    <div id="screen-chapter" class="screen">
        <div class="container">
            <header class="top-bar">
                <button id="btn-back-chapters" class="btn btn-back">&larr; Chapters</button>
                <span></span>
            </header>
            <div id="chapter-header" class="chapter-header">
                <h2 id="chapter-title"></h2>
                <div id="chapter-progress-bar" class="progress-bar-large">
                    <div class="progress-fill"></div>
                </div>
                <p id="chapter-stats" class="chapter-stats"></p>
            </div>
            <div class="chapter-study-section">
                <button id="btn-study-chapter" class="btn btn-primary btn-study-chapter">Study This Chapter</button>
                <div class="session-size-wrapper">
                    <label for="session-size-select" class="session-size-label">Questions per session</label>
                    <div class="session-size-options" id="session-size-options">
                        <button class="session-size-btn" data-value="5">5</button>
                        <button class="session-size-btn active" data-value="10">10</button>
                        <button class="session-size-btn" data-value="20">20</button>
                    </div>
                </div>
            </div>
            <div class="chapter-concepts-section">
                <button id="btn-toggle-concepts" class="btn-toggle-concepts">
                    <span id="toggle-concepts-label">Show all concepts</span>
                    <span id="toggle-concepts-arrow" class="toggle-arrow">&#9662;</span>
                </button>
                <div id="concept-list" class="concept-list hidden"></div>
            </div>
        </div>
    </div>

    <!-- Exam Prep Screen -->
    <div id="screen-exam" class="screen">
        <div class="container">
            <header class="top-bar">
                <button id="btn-back-home-from-exam" class="btn btn-back">&larr; Home</button>
                <h2 id="exam-title"></h2>
                <span></span>
            </header>
            <div id="exam-header" class="exam-header">
                <div id="exam-progress-bar" class="progress-bar-large">
                    <div class="progress-fill"></div>
                </div>
                <p id="exam-stats" class="exam-stats"></p>
            </div>
            <div class="exam-practice-section">
                <p class="exam-practice-label" id="exam-question-count"></p>
                <div class="exam-practice-buttons">
                    <button id="btn-test-mode" class="btn btn-primary">Test Mode</button>
                    <button id="btn-study-mode" class="btn btn-secondary">Study Mode</button>
                </div>
                <p class="exam-practice-hint">Test Mode: no feedback. Study Mode: feedback after each question.</p>
            </div>
            <div id="exam-chapter-list" class="exam-chapter-list"></div>
        </div>
    </div>

    <!-- Study Session Screen -->
    <div id="screen-study" class="screen">
        <div class="container">
            <header class="top-bar">
                <button id="btn-back-from-study" class="btn btn-back">&larr; Back</button>
                <span id="study-progress-label" class="study-progress-label"></span>
            </header>
            <div id="question-area" class="question-area">
                <div id="question-level" class="question-level"></div>
                <p id="question-text" class="question-text"></p>
                <div id="choices" class="choices"></div>
                <div id="feedback" class="feedback hidden" aria-live="polite">
                    <p id="feedback-text"></p>
                </div>
                <button id="btn-next" class="btn btn-primary btn-next hidden">Next</button>
            </div>
        </div>
    </div>

    <!-- Session Summary / Exam Report Screen -->
    <div id="screen-summary" class="screen">
        <div class="container">
            <div id="summary-content" class="summary-card"></div>
        </div>
    </div>

    <script src="js/content-loader.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/quiz-engine.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
